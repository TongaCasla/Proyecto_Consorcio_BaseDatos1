USUARIOS de Base de Datos
•	Los permisos de Motor de base de datos se administran en el nivel de servidor asignados a los inicios de sesión y roles de servidor, y en el nivel de base de datos asignados a usuarios de base de datos y roles base de datos.
•	SQL Server proporciona varios roles que son las entidades de seguridad que agrupan a otras entidades de seguridad.
•	Para agregar y quitar usuarios en un rol de base de datos, use las opciones ADD MEMBER y DROP MEMBER de la instrucción ALTER ROLE. 
•	En SQL SERVER, los comandos DCL (LEGUAJE DE CONTROL DE DATOS) se utilizan para administrar los permisos y la seguridad de la base de datos.
Los Permisos que se puedan otorgar a los Usuarios son de dos tipos principalmente:
1. Permisos de Sistema: Incluye permisos para crear sesiones, crear estructuras (comandos DDL- LENGUAJE DE DEFINICION DE DATOS) o incluso ejecutar código contenido dentro de la base de datos.
2. Permisos sobre Objetos: Son aquellos permisos que dejan a los usuarios ver información o incluso modificarla. 
Ejemplo (SOLO DE LECTURA, SOLO DE CONSULTA, O darle permiso para INSERT, DELETE).

Existen dos principales:
•	GRANT: Es el comando de DCL para otorgar o dar permisos a un usuario de algo en particular (permisos de sistema o sobre objetos).
 Para dar permisos, el usuario que los otorga debe tener permisos. Ejemplo:  permiso para visualizar una tabla, o una vista o ejecutar algo sobre una tabla. 
 (solo otorga permisos SUPERADMINISTRADOR).

/** GRANT SELECT, INSERT ON TABLA TO USUARIO;
   GO */
•	REVOKE: el comando revoke elimina o quita privilegios al usuario de que se trate.

   /** REVOKE SELECT, INSERT ON TABLA TO USUARIO; 
    GO */


-- =============================================
-- Author:		<Marisol Dusicka>
-- Create date: <09/11/2024>
-- Description:	<Tema: Manejo de permisos a nivel de usuarios de base de datos>
-- =============================================

-----------------------------------------------------------
------- Crear el usuario con permisos de Administrador
-------------------------------------------------------------

-- USE bd_proyecto_consorcio;
go

 /* 1. Crea dos usuarios en la base de datos
  Primero, creamos un Login para conectarnos a nuestro servidor (bd) */

 CREATE LOGIN admin WITH PASSWORD = '1234';

/* 2. Crear un usuario para ese login en la base de datos específica
 */
CREATE USER Marisol FOR LOGIN admin;
go

/* 3.  Asignar rol de administrador (sysadmin) al usuario */

ALTER SERVER ROLE sysadmin ADD MEMBER admin;  ---- ALTER SERVER ROLE: modifico el rol del servidor y se agrego un nuevo miembro a ese rol
go





-----------------------------------------------------------
------- Crear el usuario con permisos de solo lectura
-------------------------------------------------------------

-- USE bd_proyecto_consorcio;
go

/* 4. Crear un inicio de sesión (login)*/

CREATE LOGIN analista  WITH PASSWORD = '1234'; --- CREATE LOGIN NombreDelUsuarioConLectura WITH PASSWORD = 'ContraseñaSegura';
go

/* 5. Crear el usuario en la base de datos deseada */ 

CREATE USER desarrollador FOR LOGIN analista;
go

/* 6. Asignar el rol de solo lectura (db_datareader) al usuario */

--EXEC sp_addrolemember 'db_datareader', 'desarrollador';

 alter role db_datareader add member desarrollador  --- asignar el rol de solo lectura al usuario
